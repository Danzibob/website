MOVW 0xFF
MOVWR TRISB
MOVW 0x00
MOVWR TRISA
MOVW 0x00
MOVWR PORTA
MOVW 0x80
MOVWR PORTA

MAIN:
    MOVRW PORTB
    ANDW 0x80
    JPZ MAIN
    INC 0x90
    MOWRW 0x90
    CALL DIV
    INC 0x91
    INC 0x91
DIGIT:
    SUB 0x91
    MOVRW 0x9E
    XORW 0x00
    JPZ ZERO
    MOVRW 0x9E
    XORW 0x01
    JPZ ONE
    MOVRW 0x9E
    XORW 0x02
    JPZ TWO
    MOVRW 0x9E
    XORW 0x03
    JPZ THREE
    MOVRW 0x9E
    XORW 0x04
    JPZ FOUR
    MOVRW 0x9E
    XORW 0x05
    JPZ FIVE
    MOVRW 0x9E
    XORW 0x06
    JPZ SIX
    MOVRW 0x9E
    XORW 0x07
    JPZ SEVEN
    MOVRW 0x9E
    XORW 0x08
    JPZ EIGHT
    MOVRW 0x9E
    XORW 0x09
    JPZ NINE
POST:
    MOVRW 0x91
    JPZ TENS
    JMP UNITS
POSTPOST:
    MOVWR PORTA
    MOVRW 0x91
    JPZ MAIN
    MOVRW 0x9F
    MOVWR 0x9E
    JMP DIGIT


ZERO:
    MOVW 0x7D
    MOVWR 0x92
    JMP POST
ONE:
    MOVW 0x05
    MOVWR 0x92
    JMP POST
TWO:
    MOVW 0x5B
    MOVWR 0x92
    JMP POST
THREE:
    MOVW 0x4F
    MOVWR 0x92
    JMP POST
FOUR:
    MOVW 0x27
    MOVWR 0x92
    JMP POST
FIVE:
    MOVW 0x6E
    MOVWR 0x92
    JMP POST
SIX:
    MOVW 0x7E
    MOVWR 0x92
    JMP POST
SEVEN:
    MOVW 0x45
    MOVWR 0x92
    JMP POST
EIGHT:
    MOVW 0x7F
    MOVWR 0x92
    JMP POST
NINE:
    MOVW 0x6F
    MOVWR 0x92
    JMP POST

TENS:
    MOVRW 0x92
    ADDW 0x80
    JMP POSTPOST
UNITS:
    MOVRW 0x92
    JMP POSTPOST

DIV:
    MOVWR 0x9E
    MOVW 0x00
    MOVWR 0x9F
DIVMAIN:
    MOVRW 0x9E
	SUBW 0x0A
    INC 0x9F
    MOVWR 0x9E
    ANDW 0x80
    JPZ DIVMAIN
FIX:
    MOVRW 0x9E
    ADDW 0x0A
    MOVWR 0x9E
    DEC 0x9F
    RET
